<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmos Infinite - A Experiência Definitiva</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cannon.js/0.6.2/cannon.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { 
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            color: white;
            background-color: #000;
        }
        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }
        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .panel {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin: 20px;
            pointer-events: auto;
            max-width: 300px;
        }
        .tab {
            cursor: pointer;
            padding: 5px 10px;
            margin-right: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        .tab.active {
            background-color: rgba(255, 255, 255, 0.3);
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
        }
        .hidden {
            display: none;
        }
        #universe-scale {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 200px;
        }
        #scale-value {
            text-align: center;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Canvas principal para Three.js -->
    <div id="canvas"></div>
    
    <!-- Canvas para p5.js (arte generativa) -->
    <div id="p5-canvas"></div>
    
    <!-- Interface do usuário -->
    <div id="ui">
        <!-- Painel de controle principal -->
        <div class="panel" style="top: 20px; left: 20px;">
            <h1>Cosmos Infinite</h1>
            <div>
                <span class="tab active" onclick="showTab('universe-tab')">Universo</span>
                <span class="tab" onclick="showTab('physics-tab')">Física</span>
                <span class="tab" onclick="showTab('art-tab')">Arte</span>
                <span class="tab" onclick="showTab('knowledge-tab')">Conhecimento</span>
            </div>
            
            <!-- Aba do Universo -->
            <div id="universe-tab">
                <h3>Explorador de Universos</h3>
                <button onclick="createUniverse()">Criar Novo Universo</button>
                <button onclick="toggleGravity()">Alternar Gravidade</button>
                <div>
                    <label for="physics-constant">Constante Física:</label>
                    <select id="physics-constant">
                        <option value="gravity">Gravidade</option>
                        <option value="light">Velocidade da Luz</option>
                        <option value="planck">Constante de Planck</option>
                    </select>
                    <input type="range" id="constant-value" min="0.1" max="10" step="0.1" value="1">
                </div>
            </div>
            
            <!-- Aba de Física -->
            <div id="physics-tab" class="hidden">
                <h3>Laboratório de Física</h3>
                <button onclick="createBlackHole()">Criar Buraco Negro</button>
                <button onclick="createWormhole()">Criar Buraco de Minhoca</button>
                <div>
                    <label for="time-speed">Velocidade do Tempo:</label>
                    <input type="range" id="time-speed" min="0" max="10" step="0.1" value="1">
                </div>
            </div>
            
            <!-- Aba de Arte -->
            <div id="art-tab" class="hidden">
                <h3>Gerador de Arte Cósmica</h3>
                <button onclick="generateGalaxy()">Gerar Galáxia</button>
                <button onclick="generateNebula()">Gerar Nebulosa</button>
                <div>
                    <label for="art-style">Estilo Artístico:</label>
                    <select id="art-style">
                        <option value="impressionist">Impressionista</option>
                        <option value="abstract">Abstrato</option>
                        <option value="fractal">Fractal</option>
                    </select>
                </div>
            </div>
            
            <!-- Aba de Conhecimento -->
            <div id="knowledge-tab" class="hidden">
                <h3>Biblioteca do Conhecimento</h3>
                <input type="text" id="search-query" placeholder="Pesquise qualquer coisa...">
                <button onclick="searchKnowledge()">Buscar</button>
                <div id="search-results" style="margin-top: 10px;"></div>
            </div>
        </div>
        
        <!-- Controle de escala do universo -->
        <div class="panel" id="universe-scale">
            <h3>Explorador de Escalas</h3>
            <input type="range" id="scale-slider" min="-35" max="27" step="1" value="0">
            <div id="scale-value">Escala Humana (1 metro)</div>
        </div>
    </div>

    <script>
        // Configuração básica do Three.js
        let scene, camera, renderer;
        let world, physicsBodies = [];
        
        // Inicialização
        function init() {
            // Cena Three.js
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas').appendChild(renderer.domElement);
            
            // Configuração do Cannon.js (física)
            world = new CANNON.World();
            world.gravity.set(0, -9.82, 0);
            world.broadphase = new CANNON.NaiveBroadphase();
            world.solver.iterations = 10;
            
            // Luzes
            const light = new THREE.AmbientLight(0x404040);
            scene.add(light);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
            scene.add(directionalLight);
            
            // Event listeners
            window.addEventListener('resize', onWindowResize);
            document.getElementById('scale-slider').addEventListener('input', updateScale);
            document.getElementById('constant-value').addEventListener('input', updatePhysicsConstant);
            document.getElementById('time-speed').addEventListener('input', updateTimeSpeed);
            
            // Inicializa o p5.js (arte generativa)
            new p5(sketch, 'p5-canvas');
            
            // Começa a animação
            animate();
        }
        
        // Animação principal
        function animate() {
            requestAnimationFrame(animate);
            
            // Atualiza a física
            world.step(1/60);
            
            // Sincroniza os corpos físicos com os visuais
            for (let i = 0; i < physicsBodies.length; i++) {
                physicsBodies[i].mesh.position.copy(physicsBodies[i].body.position);
                physicsBodies[i].mesh.quaternion.copy(physicsBodies[i].body.quaternion);
            }
            
            renderer.render(scene, camera);
        }
        
        // Funções da UI
        function showTab(tabId) {
            document.querySelectorAll('#ui .panel > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(tabId).classList.remove('hidden');
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        function updateScale() {
            const slider = document.getElementById('scale-slider');
            const value = parseInt(slider.value);
            const scaleText = document.getElementById('scale-value');
            
            let text = "";
            if (value < -20) {
                text = `Escala Quântica (10<sup>${value}</sup> metros)`;
            } else if (value < 0) {
                text = `Escala Atômica (10<sup>${value}</sup> metros)`;
            } else if (value === 0) {
                text = "Escala Humana (1 metro)";
            } else if (value <= 10) {
                text = `Escala Planetária (10<sup>${value}</sup> metros)`;
            } else {
                text = `Escala Cósmica (10<sup>${value}</sup> metros)`;
            }
            
            scaleText.innerHTML = text;
        }
        
        function updatePhysicsConstant() {
            const constant = document.getElementById('physics-constant').value;
            const value = parseFloat(document.getElementById('constant-value').value);
            
            switch(constant) {
                case 'gravity':
                    world.gravity.set(0, -9.82 * value, 0);
                    break;
                // Outras constantes físicas podem ser adicionadas aqui
            }
        }
        
        function updateTimeSpeed() {
            const speed = parseFloat(document.getElementById('time-speed').value);
            // Implementar lógica de alteração de velocidade do tempo
        }
        
        // Funções de criação
        function createUniverse() {
            // Limpa a cena atual
            while(scene.children.length > 0){ 
                scene.remove(scene.children[0]); 
            }
            physicsBodies = [];
            
            // Adiciona uma nova luz
            const light = new THREE.AmbientLight(0x404040);
            scene.add(light);
            
            // Cria um novo "universo" básico
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const sphere = new THREE.Mesh(geometry, material);
            scene.add(sphere);
            
            // Corpo físico correspondente
            const sphereBody = new CANNON.Body({
                mass: 5,
                shape: new CANNON.Sphere(1),
                position: new CANNON.Vec3(0, 0, 0)
            });
            world.addBody(sphereBody);
            
            physicsBodies.push({
                mesh: sphere,
                body: sphereBody
            });
        }
        
        function toggleGravity() {
            world.gravity.set(0, world.gravity.y === 0 ? -9.82 : 0, 0);
        }
        
        function createBlackHole() {
            // Implementação simplificada de um buraco negro
            const geometry = new THREE.SphereGeometry(0.5, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: 0x000000 });
            const blackHole = new THREE.Mesh(geometry, material);
            scene.add(blackHole);
            
            // Efeito visual de distorção pode ser adicionado aqui
        }
        
        function createWormhole() {
            // Implementação simplificada de um buraco de minhoca
            const geometry = new THREE.TorusGeometry(1, 0.4, 16, 100);
            const material = new THREE.MeshBasicMaterial({ color: 0x00ffff, wireframe: true });
            const wormhole = new THREE.Mesh(geometry, material);
            scene.add(wormhole);
        }
        
        function generateGalaxy() {
            // Implementação simplificada de gerador de galáxia
            alert("Galáxia gerada! (Implementação completa usaria p5.js para arte generativa)");
        }
        
        function generateNebula() {
            // Implementação simplificada de gerador de nebulosa
            alert("Nebulosa gerada! (Implementação completa usaria shaders WebGL)");
        }
        
        function searchKnowledge() {
            const query = document.getElementById('search-query').value;
            document.getElementById('search-results').innerHTML = 
                `<p>Resultados para: <strong>${query}</strong></p>
                 <p>Implementação completa integraria com APIs de conhecimento como Wikipedia.</p>`;
        }
        
        // Sketch p5.js para arte generativa
        function sketch(p) {
            p.setup = function() {
                let canvas = p.createCanvas(200, 200);
                canvas.position(20, 20);
                canvas.style('z-index', '1');
                p.background(0);
            };
            
            p.draw = function() {
                p.fill(255, 50);
                p.noStroke();
                p.ellipse(p.random(p.width), p.random(p.height), 10, 10);
            };
        }
        
        // Utilitários
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // Inicia o aplicativo
        init();
    </script>
</body>
</html>
